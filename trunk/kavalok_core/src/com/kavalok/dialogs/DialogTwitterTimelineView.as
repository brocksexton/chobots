package com.kavalok.dialogs{	import com.kavalok.Global;	import com.kavalok.McCharWindow;	import com.kavalok.char.Char;	import com.kavalok.char.CharModel;	import com.kavalok.location.LocationManager;	import com.kavalok.dto.stuff.StuffItemLightTO;	import com.kavalok.gameplay.KavalokConstants;	import com.kavalok.gameplay.ResourceSprite;	import com.kavalok.gameplay.commands.RegisterGuestCommand;	import com.kavalok.gameplay.controls.RectangleSprite;	import com.kavalok.localization.ResourceBundle;	import com.kavalok.ui.LoadingSprite;	import com.kavalok.ui.Window;	import com.kavalok.utils.GraphUtils;	import com.kavalok.services.AdminService;	import com.kavalok.services.CharService;	import com.kavalok.utils.NameRequirement;	import com.kavalok.utils.SpriteTweaner;	import com.kavalok.utils.Strings;		import flash.display.DisplayObject;	import flash.display.Loader;	import flash.net.URLLoader;	import flash.net.URLRequest;	import fl.controls.UIScrollBar;	import flash.net.URLRequestMethod;	import flash.net.navigateToURL;	import flash.display.InteractiveObject;	import flash.display.SimpleButton;	import flash.display.Sprite;	import flash.events.ContextMenuEvent;	import flash.events.Event;	import flash.events.MouseEvent;	import flash.geom.Point;	import flash.geom.Rectangle;	import flash.system.System;	import flash.ui.ContextMenu;	import Math;	import flash.text.AntiAliasType;	import flash.text.TextField;	import flash.text.TextFormat;	import flash.ui.ContextMenuItem;	import flash.utils.getDefinitionByName;	import com.kavalok.MoodType;	import com.kavalok.RankType;	import flash.system.Security;	import flash.events.TimerEvent;	import flash.utils.Timer;		import com.kavalok.events.EventSender;		public class DialogTwitterTimelineView extends DialogViewBase	{		public var Close:SimpleButton;		public var Refresh:SimpleButton;		public var Tweets:TextField;		public var FollowersAmount:TextField;		public var TweetAmount:TextField;		public var TextBG:Sprite;		public var ScrollBar:UIScrollBar = new UIScrollBar();		protected var totalFollowers:uint = 0;		protected var totalTweets:uint = 0;		private var _timer:Timer;				private var _ok:EventSender = new EventSender();				public function DialogTwitterTimelineView(moretxt:String, text:String, modal:Boolean = true)		{			super(new DialogTwitterTimeline(), text, modal);			new AdminService(onGetFollowers).getFollowers(Global.charManager.accessToken, Global.charManager.accessTokenSecret);			new AdminService(onGetTweets).getTweets(Global.charManager.accessToken, Global.charManager.accessTokenSecret);			Close.addEventListener(MouseEvent.CLICK, onOkClick);			Refresh.addEventListener(MouseEvent.CLICK, onRefreshClick);			ScrollBar.scrollTarget = Tweets;			Tweets.htmlText = Strings.substitute(moretxt.substring(1,moretxt.length-1));			TweetAmount.text = Strings.substitute(totalTweets.toString());			FollowersAmount.text = Strings.substitute(totalFollowers.toString());			_timer = new Timer(1000, 3);			_timer.addEventListener(TimerEvent.TIMER_COMPLETE, onTimerComplete);		}				public function get ok():EventSender		{			return _ok;		}				protected function onGetFollowers(followers:int):void		{			FollowersAmount.text = Strings.substitute(followers.toString());		}				protected function onGetTweets(tweets:int):void		{			TweetAmount.text = Strings.substitute(tweets.toString());		}				protected function onRefreshClick(event:MouseEvent):void		{			_timer.start();			Global.isLocked = true;			hide();		}				private function onTimerComplete(event:TimerEvent):void		{			new AdminService().loadTimeline(Global.charManager.userId, Global.charManager.accessToken, Global.charManager.accessTokenSecret);		}				protected function onOkClick(event:MouseEvent):void		{			hide();		}	}}