<?xml version="1.0" encoding="utf-8"?>
<LogBase xmlns="com.kavalok.admin.log.*" xmlns:mx="http://www.adobe.com/2006/mxml" xmlns:users="com.kavalok.admin.users.*" xmlns:controls="org.goverla.controls.*">
	<users:UserView
		permissionLevel="{permissionLevel}"
		user="{userDataProvider.user}"
		showFamily="dispatchEvent(event)"/>
		<mx:Script>
		<![CDATA[
			import com.kavalok.admin.messages.renderers.ButtonRenderer;
			import org.goverla.controls.SizableTextArea;
			import mx.controls.Text;
			import mx.controls.TextArea;
			import mx.controls.Button;
		]]>
	</mx:Script>
	<mx:VDividedBox
		width="100%"
		height="100%">
		<mx:VBox
			width="100%"
			height="100%">
		
		<mx:Button
			label="{scrollable?'pause':'play'}"
			click="scrollable=!scrollable"/>
		<mx:DataGrid
			id="dataGrid"
			width="100%"
			height="100%"
			variableRowHeight="true"
			dataProvider="{messages}">
			<mx:columns>
				<mx:DataGridColumn
					headerText="user"
					dataField="login"
					width="100">
					<mx:itemRenderer>
						<mx:Component>
							<mx:Button
								label="{data.login}"
								click="outerDocument.onUserSelect(data.userId)"/>
						</mx:Component>
					</mx:itemRenderer>
				</mx:DataGridColumn>
				<mx:DataGridColumn
					width="100"
					headerText="action"
					dataField="buttonName">
					<mx:itemRenderer>
						<mx:Component>
							<mx:Button
								label="{data.buttonName}"
								enabled="{!data.processed}"
								click="data.process(); this.enabled=false;"/>
						</mx:Component>
					</mx:itemRenderer>
				</mx:DataGridColumn>
				<mx:DataGridColumn
					width="100"
					headerText="info"
					dataField="info"/>
				<mx:DataGridColumn
					headerText="message"
					dataField="message">
					<mx:itemRenderer>
						<mx:Component>
							<mx:TextArea
								editable="false"
								htmlText="{data.message}"
								color="{'bad'== data.type? 0xFF0000: 'skip'== data.type? 0x00FF00 : 0x00000 }"
								height="{data.height}"/>
						</mx:Component>
					</mx:itemRenderer>
				</mx:DataGridColumn>
			</mx:columns>
		</mx:DataGrid>
		</mx:VBox>
		<mx:HDividedBox
			width="100%">
		<mx:Panel
			title="user messages"
			width="100%">
			<mx:TextArea
				width="100%"
				height="100"
				editable="false"
				text="{userChatDataProvider.text}"/>
		</mx:Panel>
		<mx:Panel
			title="moderator actions"
			width="100%">
			<mx:TextArea
				width="100%"
				height="100"
				editable="false"
				id="modActionText"/>
				<mx:HBox>	
				<mx:Label 
					text="Online: "
					fontWeight="bold"/>
			<mx:Label
				id="onlineMods"
				width="100%"
				height="100%"/>

		</mx:HBox>
		</mx:Panel>
		</mx:HDividedBox>
	</mx:VDividedBox>
</LogBase>
